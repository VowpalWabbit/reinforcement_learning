## How test files were generated

- fb_events/cb_v2.fb: `./example_gen --kind cb --count 1`
- fb_events/f-reward_v2.fb: `./example_gen --kind f-reward --count 1`
- fb_events/cb_v2_dedup.fb: `./example_gen --kind cb --count 1 --dedup`
- fb_events/cb_v2_size_2.fb: `./example_gen --kind cb --count 2`
- fb_events/f-reward_v2_size_2.fb: `./example_gen --kind f-reward --count 2`
- fb_events/invalid-cb_v2_size_2.fb: `./example_gen --kind invalid-cb --count 2`
- fb_events/ccb_v2.fb: `./example_gen --kind ccb --count 1`
- fb_events/ca_v2.fb: `./example_gen --kind ca --count 1`
- fb_events/ca_v2_size_2.fb: `./example_gen --kind ca --count 2`
- fb_events/fi-reward_v2.fb `./example_gen --kind fi-reward --count 1`
- valid_joined_logs/rcrrmr.fb `./log_gen.py rcrrmr`
- valid_joined_logs/rrcr.fb `./log_gen.py rrcr`
- fb_events/cb_v2_size_5_apprentice.fb: `./example_gen --kind cb --count 5 --apprentice`
- fb_events/f-reward_v2_size_5_apprentice.fb: `./example_gen --kind f-reward --count 5 --apprentice`
- fb_events/ccb-baseline-loopinteractions_v2.fb and fb_events/ccb-baseline-loopobservations_v2.fb: `./example_gen --kind ccb-baseline-loop --random_reward --count 5 --apprentice --epsilon 1 --seed 2`

### valid joined logs

Residing under `valid_joined_logs`

- cb_simple.log: generated by running `python joiner.py --problem_type_config 1` on the above files (cb_v2.fb, f-reward_v2.fb) and renaming the resulting default `merged.log`
- cb_dedup_compressed.log: generated by running `python joiner.py --problem_type_config 1` with the files (cb_v2_dedup.fb, f-reward_v2.fb) and renaming the resulting default `merged.log`
- average_reward_100_interactions.[fb|json]: generated by running `./example_gen --kind cb-loop --random_reward --count 100` and performing binary joining and dsjson joining (with average reward) to generate each file (`.fb` and `.json`)
- ccb_simple.log: generated by running `python joiner.py --problem_type_config 2` on the above files (ccb_v2.fb, fi-reward_v2.fb) and renaming the resulting default `merged.log`
- ccb_sum_reward_100_interactions.[fb|json]: generated by running `./example_gen --kind ccb-loop --random_reward --count 100` and performing binary joining and dsjson joining (with average reward) to generate each file (`.fb` and `.json`)
- ca_loop_simple.[fb|json]: generated by running `./example_gen --kind ca-loop --count 3` and performing binary joining and dsjson joining (with average reward) to generate each file (`.fb` and `.json`)
- ca_loop_mixed_skip_learn.[fb|json]: generated by running `./example_gen --kind ca-loop --count 3 --deferred_action_count 1 --no_loop_actions` and performing binary joining and dsjson joining (with average reward) to generate each file (`.fb` and `.json`)
- ca_loop_simple_e2e.log: generated by running `./example_gen --kind ca-loop --count 3 --config_file output/perfrlclient.json` and performing binary join with `python joiner.py --problem_type_config 4`
- cb_apprentice_5.log: generated by running `python joiner.py --problem_type_config 1 --learning_mode_config 1` with the files (cb_v2_size_5_apprentice.fb, f-reward_v2_size_5_apprentice.fb) and renaming the resulting default `merged.log`
- cb_deferred_actions_w_activations_and_apprentice_10.[fb|json]: generated by running (with Apprentice mode enabled) `./example_gen --kind cb-loop --random_reward --count 10 --deferred_action_count 5` which should defer the first 5 actions and for those deferred actions, randomly send an activation (in practise without a seed, this sends 2 activations so we get a total of 7 learnable events) and performing binary joining
- ccb_apprentice_5.log: generated by running `python joiner.py --problem_type_config 2 --learning_mode_config 1` with the files (ccb-baseline-loopinteractions_v2.fb, ccb-baseline-loopobservations_v2.fb) and renaming the resulting default `merged.log`
- ccb_deferred_actions_w_activations_and_apprentice_20.[fb|json]: generated by running (with Apprentice mode enabled) `./example_gen --kind ccb-baseline-loop --random_reward --count 20 --deferred_action_count 5` and performing binary joining and dsjson joining (with earliest reward) to generate each file (`.fb` and `.json`)
- valid_joined_logs/cb_joined_with_pdrop_05.fb: generated by running test_gen.py from test_tools/log_parser
- valid_joined_logs/cb_joined_with_pdrop_1.fb: generated by running test_gen.py from test_tools/log_parser
- ccb_w_slot_id.log
  - interaction: `./example_gen --kind ccb-with-slot-id`
  - observation: `./example_gen --kind fs-reward` (change the num_of_rewards to 1)
  - `python joiner.py --problem_type_config 2` with the files generated from previous 2 steps
- ca_mixed_deferred_action_events_20.log:
  - Generate ca_v2.fb with 2 events first event has deferred_action equals to true: `./example_gen --kind ca --count 20 --deferred_action_count 10`
  - Generated regular f-reward_v2.fb: `./example_gen --kind f-reward --count 20`
  - Run python joiner with files from previous two steps: `python joiner.py --problem_type_config 4`. Then rename the merged.log file.
- slates_simple.log:
  - slates_v2.fb: `./example_gen --kind slates --seed -1`
  - f-reward_v2.fb: `./example_gen --kind f-reward --seed -1`
  - Run `python joiner.py --problem_type_config 3` on the above files (slates_v2.fb, f-reward_v2.fb) and renaming the resulting default `merged.log`

### invalid joined logs

Residing under `invalid_joined_logs`

- invalid_cb_context.log: generated by running `python joiner.py --problem_type_config 1` on the files (invalid-cb_v2_size_2.fb, f-reward_v2_size_2.fb) and renaming the resulting default `merged.log`
- incomplete_checkpoint_info.log generated by running `python joiner.py -c --problem_type_config 1` with the files (cb_v2_size_2.fb, f-reward_v2.fb), skipping problem type explicitly so that it it set to UNKNOWN and renaming the resulting default `merged.log`

- bad_magic.log, bad_version.log, no_msg_hdr.log, empty_msg_hdr.log, corrupt_joined_payload.log, bad_event_in_joined_event.log, dedup_payload_missing.log, interaction_with_no_observation.log, no_interaction_but_with_observation.log, one_invalid_msg_type.log were generated by running `python joiner.py -c --problem_type_config 1` with the files (cb_v2_size_2.fb, f-reward_v2_size_2.fb)

### reward function test files

Residing under `reward_functions`

#### cb format
- cb_v2.fb: `./example_gen --kind cb --count 1 --seed -1`
- cb_apprentice_match_baseline_v2.fb: `./example_gen --kind cb --seed -1 --apprentice`
- f-reward_3obs_v2.fb: `./example_gen --kind f-reward --count 3 --seed -1 --random_reward`

#### ccb format
- ccb_v2.fb: `./example_gen --kind ccb --count 1`
- ccb-with-slot-id_v2.fb: `./example_gen --kind ccb-with-slot-id`
- ccb-apprentice-baseline-match_v2.fb: `./example_gen --kind ccb-baseline --apprentice` (in example_gen.cc change baseline_actions to {0, 1})
- ccb-apprentice-baseline-not-match_v2.fb: `./example_gen --kind ccb-baseline --apprentice` (in example_gen.cc change baseline_actions to {1, 0})

- fi-reward_v2.fb: `./example_gen --kind fi-reward --random_reward`
- fs-reward_v2.fb: `./example_gen --kind fs-reward --random_reward`
- fmix-reward_v2.fb: `./example_gen --kind fmix-reward --random_reward`
- fi-out-of-bound-reward_v2.fb: `./example_gen --kind fi-out-of-bound-reward`

#### slates format
- slates_v2.fb `./example_gen --kind slates`
- fi-reward_v2.fb: `./example_gen --kind fi-reward --random_reward` (change num_of_rewards to 2)

#### ca format
- ca_v2.fb: `./example_gen --kind ca --count 1 --seed -1`
- f-reward_3obs_v2.fb: `./example_gen --kind f-reward --count 3 --seed -1 --random_reward`

### client time utc test files

Residing under `client_time`

Note: these files were generated after setting `"time_provider.implementation"` to `"CLOCK_TIME_PROVIDER"` in the configuration of example_gen

- cb_v2_client_time.fb: `./example_gen --kind cb --count 1 --seed -1`
- f-reward_3obs_v2_client_time.fb: `./example_gen --kind f-reward --count 3 --seed -1 --random_reward`

### skip learn test files

Residing under `skip_learn`

#### cb format
- deferred_action_without_activation.fb:
  - Generate cb_v2.fb with deferred action: `./example_gen --kind cb --deferred_action_count 1`
  - Generate regular f-reward_v2.fb: `./example_gen --kind f-reward`
  - Run python joiner with files from previous two steps: `python joiner.py --problem_type_config 1`. Then rename the merged.log file.
- deferred_action_with_activation.fb:
  - Generate cb_v2.fb with deferred action: `./example_gen --kind cb --deferred_action_count 1`
  - Generate action-taken_v2.fb: `./example_gen --kind action-taken`
  - Run python joiner with files from previous two steps: `python joiner.py --problem_type_config 1`. Then rename the merged.log file.
- mixed_deferred_action_events.fb:
  - Generate cb_v2.fb with 2 events first event has deferred_action equals to true: `./example_gen --kind cb --count 2 --deferred_action_count 1`
  - Generated regular f-reward_v2.fb: `./example_gen --kind f-reward --count 2`
  - Run python joiner with files from previous two steps: `python joiner.py --problem_type_config 1`. Then rename the merged.log file.
- deferred_action_without_activation_deduped.fb:
  - Generate cb_v2.fb with deferred action: `./example_gen --kind cb --deferred_action_count 1 --dedup`
  - Generate regular f-reward_v2.fb: `./example_gen --kind f-reward --dedup`
  - Run python joiner with files from previous two steps: `python joiner.py --problem_type_config 1`. Then rename the merged.log file.
- deferred_action_with_activation_deduped.fb:
  - Generate cb_v2.fb with deferred action: `./example_gen --kind cb --deferred_action_count 1 --dedup`
  - Generate action-taken_v2.fb: `./example_gen --kind action-taken --dedup`
  - Run python joiner with files from previous two steps: `python joiner.py --problem_type_config 1`. Then rename the merged.log file.

#### ccb format
- deferred_action_without_activation.fb:
  - Generate ccb_v2.fb with deferred action: `./example_gen --kind ccb --deferred_action_count 1`
  - Generate regular fi-reward_v2.fb: `./example_gen --kind fi-reward --random_reward`
  - Run python joiner with files from previous two steps: `python joiner.py --problem_type_config 2`. Then rename the merged.log file.
- deferred_action_with_activation.fb:
  - Generate ccb_v2.fb with deferred action: `./example_gen --kind ccb --deferred_action_count 1`
  - Generate action-taken_v2.fb: `./example_gen --kind action-taken`
  - Run python joiner with files from previous two steps: `python joiner.py --problem_type_config 2`. Then rename the merged.log file.
- mixed_deferred_action_events.fb:
  - Generate ccb_v2.fb with 2 events first event has deferred_action equals to true: `./example_gen --kind ccb --count 2 --deferred_action_count 1`
  - Generated regular fi-reward_v2.fb: `./example_gen --kind fi-reward --count 2`
  - Run python joiner with files from previous two steps: `python joiner.py --problem_type_config 2`. Then rename the merged.log file.
- deferred_action_without_activation_deduped.fb:
  - Generate ccb_v2.fb with deferred action: `./example_gen --kind ccb --deferred_action_count 1 --dedup`
  - Generate regular fi-reward_v2.fb: `./example_gen --kind fi-reward --dedup`
  - Run python joiner with files from previous two steps: `python joiner.py --problem_type_config 2`. Then rename the merged.log file.
- deferred_action_with_activation_deduped.fb:
  - Generate ccb_v2.fb with deferred action: `./example_gen --kind ccb --deferred_action_count 1 --dedup`
  - Generate action-taken_v2.fb: `./example_gen --kind action-taken --dedup`
  - Run python joiner with files from previous two steps: `python joiner.py --problem_type_config 2`. Then rename the merged.log file.

#### ca format
- deferred_action_without_activation.fb:
  - Generate ca_v2.fb with deferred action: `./example_gen --kind ca --deferred_action_count 1`
  - Generate regular f-reward_v2.fb: `./example_gen --kind f-reward`
  - Run python joiner with files from previous two steps: `python joiner.py --problem_type_config 4`. Then rename the merged.log file.
- deferred_action_with_activation.fb:
  - Generate ca_v2.fb with deferred action: `./example_gen --kind ca --deferred_action_count 1`
  - Generate action-taken_v2.fb: `./example_gen --kind action-taken`
  - Run python joiner with files from previous two steps: `python joiner.py --problem_type_config 4`. Then rename the merged.log file.
- mixed_deferred_action_events.fb:
  - Generate ca_v2.fb with 2 events first event has deferred_action equals to true: `./example_gen --kind ca --count 2 --deferred_action_count 1`
  - Generated regular f-reward_v2.fb: `./example_gen --kind f-reward --count 2`
  - Run python joiner with files from previous two steps: `python joiner.py --problem_type_config 4`. Then rename the merged.log file.
- deferred_action_without_activation_deduped.fb:
  - Generate ca_v2.fb with deferred action: `./example_gen --kind ca --deferred_action_count 1 --dedup`
  - Generate regular f-reward_v2.fb: `./example_gen --kind f-reward --dedup`
  - Run python joiner with files from previous two steps: `python joiner.py --problem_type_config 4`. Then rename the merged.log file.
- deferred_action_with_activation_deduped.fb:
  - Generate ca_v2.fb with deferred action: `./example_gen --kind ca --deferred_action_count 1 --dedup`
  - Generate action-taken_v2.fb: `./example_gen --kind action-taken --dedup`
  - Run python joiner with files from previous two steps: `python joiner.py --problem_type_config 4`. Then rename the merged.log file.

#### slates format
- deferred_action_without_activation.fb:
  - Generate slates_v2.fb with deferred action: `./example_gen --kind slates --deferred_action_count 1`
  - Generate regular fi-reward_v2.fb: `./example_gen --kind fi-reward --random_reward`
  - Run python joiner with files from previous two steps: `python joiner.py --problem_type_config 3`. Then rename the merged.log file.
- deferred_action_with_activation.fb:
  - Generate slates_v2.fb with deferred action: `./example_gen --kind slates --deferred_action_count 1`
  - Generate action-taken_v2.fb: `./example_gen --kind action-taken`
  - Run python joiner with files from previous two steps: `python joiner.py --problem_type_config 3`. Then rename the merged.log file.
- mixed_deferred_action_events.fb:
  - Generate slates_v2.fb with 2 events first event has deferred_action equals to true: `./example_gen --kind slates --count 2 --deferred_action_count 1`
  - Generated regular fi-reward_v2.fb: `./example_gen --kind fi-reward --count 2`
  - Run python joiner with files from previous two steps: `python joiner.py --problem_type_config 3`. Then rename the merged.log file.
