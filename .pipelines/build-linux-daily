schedules:
- cron: "0 8 * * *"
  displayName: Integration with latest VW
  branches:
    include:
    - master
  always: true

pr: none
trigger: none

pool:
  vmImage: 'ubuntu-18.04'

container:
  image: vowpalwabbit/rl-ubuntu-1804:latest
  endpoint: DockerHub

steps:
- checkout: self
  submodules: true
- bash: |
    cd ext_libs/vowpal_wabbit
    git pull origin master
- bash: ./.scripts/linux/build.sh
  displayName: Build C++
- bash: ./.scripts/linux/test.sh
  displayName: Test C++
- task: PublishTestResults@2
